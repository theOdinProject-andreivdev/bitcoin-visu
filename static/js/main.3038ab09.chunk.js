(this["webpackJsonpbitcoin-visu"]=this["webpackJsonpbitcoin-visu"]||[]).push([[0],{44:function(t,e,n){},45:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var c=n(6),s=n(1),a=n.n(s),r=n(34),o=n.n(r),i=(n(44),n(5)),b=n(11),u=n(0),l=n(4),j=n(2),f=n(3),h=(n(45),n(24)),O=n.n(h),d=n(35),p=n(36),v=n.n(p),x=function(){var t=new WebSocket("wss://ws.blockchain.info/inv");return{subscribeTo:function(){var e=Object(d.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.readyState===t.OPEN){e.next=12;break}return e.prev=1,e.next=4,new Promise((function(e,n){var c=0,s=setInterval((function(){c>99?(clearInterval(s),n(new Error("Maximum number of attempts exceeded"))):t.readyState===t.OPEN&&(clearInterval(s),e()),c++}),100)}));case 4:t.send(JSON.stringify({op:n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:e.next=13;break;case 12:t.send(JSON.stringify({op:n}));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),startListen:function(e,n){t.onmessage=function(t){var c=JSON.parse(t.data);"utx"===c.op&&e(c.x.hash),"block"===c.op&&n(c.x.hash)}},getTxForBlock:function(t,e){v.a.get("https://blockchain.info/rawblock/"+t+"?&cors=true").then((function(t){e(t.data.tx)})).catch((function(t){console.log(t)})).then((function(){}))}}},k=n(14),m=function(t){var e=Object(s.useState)(100),n=Object(i.a)(e,2),a=n[0],r=(n[1],Object(s.useState)(20*t.number-75)),o=Object(i.a)(r,2),b=o[0],u=(o[1],Object(s.useState)(0)),l=Object(i.a)(u,2),j=l[0],f=l[1],h=Object(s.useState)(0),O=Object(i.a)(h,2),d=O[0],p=O[1];return Object(k.b)((function(){f(j+.01),p(d+.01)})),Object(c.jsxs)("mesh",{position:[a,b,0],rotation:[j,d,0],scale:[10,10,10],children:[Object(c.jsx)("boxBufferGeometry",{args:[1,1,1]}),Object(c.jsx)("meshStandardMaterial",{color:"orange"})]})},S=function(t){var e=Object(s.useState)(-150),n=Object(i.a)(e,2),a=n[0],r=(n[1],Object(s.useState)(100*Math.random()-50)),o=Object(i.a)(r,2),b=o[0],u=(o[1],Object(s.useState)(0)),l=Object(i.a)(u,2),j=l[0],f=(l[1],Object(s.useState)(0)),h=Object(i.a)(f,2),O=h[0],d=(h[1],Object(s.useRef)());return Object(k.b)((function(){var t,e;d.current.position.x<50&&(d.current.position.x=d.current.position.x+(t=.2,e=.2,Math.random()*(e-t)+t))})),Object(c.jsxs)("mesh",{ref:d,position:[a,b,0],rotation:[j,O,0],scale:[.5,.5,.5],children:[Object(c.jsx)("sphereBufferGeometry",{args:[1]}),Object(c.jsx)("meshStandardMaterial",{color:"hotpink"})]})},g=function(t){Object(j.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).transactions=new Map,t.transactionsInBlocks=0,t.blocks=new Map,t.init(),t}return Object(l.a)(n,[{key:"init",value:function(){var t=this;if(console.log("Init"),"WebSocket"in window){var e=x();e.subscribeTo("unconfirmed_sub"),e.subscribeTo("blocks_sub");var n=function(e){console.log("Size before block: "+t.transactions.size),e.forEach((function(e){t.transactions.has(e.hash)&&(t.transactions.delete(e.hash),t.transactionsInBlocks++)})),console.log("Size after block: "+t.transactions.size)};e.startListen((function(e){var n=t.transactions.get(e);n>0&&t.transactions.set(e,n+1),t.transactions.set(e,1),t.forceUpdate()}),(function(c){var s=t.blocks.get(c);s>0&&t.blocks.set(c,s+1),t.blocks.set(c,1),e.getTxForBlock(c,n)}))}else alert("WebSocket NOT supported by your Browser!")}},{key:"render",value:function(){var t,e=[],n=[],s=Object(b.a)(this.transactions);try{for(s.s();!(t=s.n()).done;){var a=Object(i.a)(t.value,2),r=a[0];a[1];e.push(r)}}catch(f){s.e(f)}finally{s.f()}var o,u=0,l=Object(b.a)(this.blocks);try{for(l.s();!(o=l.n()).done;){var j=Object(i.a)(o.value,2);j[0],j[1];n.push(u),u++}}catch(f){l.e(f)}finally{l.f()}return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("div",{class:"card",children:[Object(c.jsxs)("div",{class:"card-body",children:["Pending transactions: ",this.transactions.size]}),Object(c.jsxs)("div",{class:"card-body",children:["Transactions in blocks: ",this.transactionsInBlocks]})]}),Object(c.jsxs)(k.a,{camera:{fov:50,position:[0,0,200]},children:[Object(c.jsx)("ambientLight",{}),Object(c.jsx)("pointLight",{position:[10,10,10]}),e.map((function(t){return Object(c.jsx)(S,{},t)})),n.map((function(t){return Object(c.jsx)(m,{number:t},t)}))]})]})}}]),n}(s.Component);o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.3038ab09.chunk.js.map